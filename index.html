<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kinetic Text Clock</title>
  <style>
    :root {
      --bg-color: #1a1a1a;
      --clock-face: #222;
      --hand-color: #eee;
      --clock-size: 8px;
      --transition-speed: 0.8s;
      --accent-color: #00d2ff;
    }

    body {
      background-color: var(--bg-color);
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: 'Courier New', Courier, monospace;
      overflow: hidden;
      color: #fff;
    }

    .display-container {
      display: flex;
      gap: calc(var(--clock-size) * 1.5);
      padding: 30px;
      background: #111;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
      max-width: 98vw;
      overflow-x: auto;
    }

    .digit-grid {
      display: grid;
      gap: 1px;
    }

    .clock {
      width: var(--clock-size);
      height: var(--clock-size);
      background-color: var(--clock-face);
      border-radius: 50%;
      position: relative;
    }

    .hand {
      position: absolute;
      background-color: var(--hand-color);
      left: 50%;
      bottom: 50%;
      width: 2px;
      height: 50%;
      transform-origin: bottom center;
      border-radius: 1px;
      will-change: transform;
      transition: transform var(--transition-speed) cubic-bezier(0.5, 0, 0.2, 1);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }

    .hand.hour {
      z-index: 2;
    }

    .hand.minute {
      z-index: 1;
    }
  </style>
</head>

<body>

  <div class="display-container" id="display"></div>

  <script>
    // ============== CONFIGURATION ==============
    // Change this value to scale: 1, 2, 3, 4, etc.
    const SCALE = 1;
    // ===========================================

    const BASE_WIDTH = 8;
    const BASE_HEIGHT = 12;
    const GRID_WIDTH = BASE_WIDTH * SCALE;
    const GRID_HEIGHT = BASE_HEIGHT * SCALE;
    const CLOCKS_PER_DIGIT = GRID_WIDTH * GRID_HEIGHT;

    // Set grid template based on scale
    document.documentElement.style.setProperty('--grid-cols', GRID_WIDTH);
    document.documentElement.style.setProperty('--grid-rows', GRID_HEIGHT);

    const ANGLES = {
      '|': [0, 180],
      '-': [90, 270],
      'r': [90, 180],
      '7': [180, 270],
      'L': [0, 90],
      'J': [0, 270],
      '>': [0, 90],
      '<': [0, 270],
      '^': [90, 270],
      'v': [90, 270],
      '.': [225, 225]
    };

    // Original 8x12 patterns
    const CHAR_MAP_BASE = {
      '0': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        '|', '.', 'r', '-', '-', '7', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', 'L', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '-', '-', 'J'
      ],
      '1': [
        '.', '.', '.', '.', 'r', '-', '-', '7',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', '|', '.', '.', '|',
        '.', '.', '.', '.', 'L', '-', '-', 'J'
      ],
      '2': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '7', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        'r', '-', '-', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        '|', '.', 'r', '-', '-', '-', '-', 'J',
        '|', '.', '|', '.', '.', '.', '.', '.',
        '|', '.', '|', '.', '.', '.', '.', '.',
        '|', '.', 'L', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '-', '-', 'J'
      ],
      '3': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '7', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', 'r', '-', '-', '-', 'J', '.', '|',
        '.', '|', '.', '.', '.', '.', '.', '|',
        '.', 'L', '-', '-', '-', '7', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        'r', '-', '-', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '-', '-', 'J'
      ],
      '4': [
        'r', '-', '7', '.', '.', 'r', '-', '7',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', 'L', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '7', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', 'L', '-', 'J'
      ],
      '5': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        '|', '.', 'r', '-', '-', '-', '-', 'J',
        '|', '.', '|', '.', '.', '.', '.', '.',
        '|', '.', 'L', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '7', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        'r', '-', '-', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '-', '-', 'J'
      ],
      '6': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        '|', '.', 'r', '-', '-', '-', '-', 'J',
        '|', '.', '|', '.', '.', '.', '.', '.',
        '|', '.', 'L', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        '|', '.', 'r', '-', '-', '7', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', 'L', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '-', '-', 'J'
      ],
      '7': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '7', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', 'L', '-', 'J'
      ],
      '8': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        '|', '.', 'r', '-', '-', '7', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', 'L', '-', '-', 'J', '.', '|',
        '|', '.', 'r', '-', '-', '7', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', 'L', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '-', '-', 'J'
      ],
      '9': [
        'r', '-', '-', '-', '-', '-', '-', '7',
        '|', '.', '.', '.', '.', '.', '.', '|',
        '|', '.', 'r', '-', '-', '7', '.', '|',
        '|', '.', '|', '.', '.', '|', '.', '|',
        '|', '.', 'L', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '7', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        '.', '.', '.', '.', '.', '|', '.', '|',
        'r', '-', '-', '-', '-', 'J', '.', '|',
        '|', '.', '.', '.', '.', '.', '.', '|',
        'L', '-', '-', '-', '-', '-', '-', 'J'
      ],
      ':': [
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', 'r', '-', '-', '7', '.', '.',
        '.', '.', '|', '.', '.', '|', '.', '.',
        '.', '.', '|', '.', '.', '|', '.', '.',
        '.', '.', 'L', '-', '-', 'J', '.', '.',
        '.', '.', 'r', '-', '-', '7', '.', '.',
        '.', '.', '|', '.', '.', '|', '.', '.',
        '.', '.', '|', '.', '.', '|', '.', '.',
        '.', '.', 'L', '-', '-', 'J', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.'
      ],
      ' ': [
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.',
        '.', '.', '.', '.', '.', '.', '.', '.'
      ]
    };

    // Generate expanded block for a symbol at given scale
    function expandSymbol(symbol, scale) {
      const block = [];
      for (let y = 0; y < scale; y++) {
        for (let x = 0; x < scale; x++) {
          block.push(getExpandedCell(symbol, x, y, scale));
        }
      }
      return block;
    }

    function getExpandedCell(symbol, x, y, scale) {
      const isTop = y === 0;
      const isBottom = y === scale - 1;
      const isLeft = x === 0;
      const isRight = x === scale - 1;

      switch (symbol) {
        case '.': return '.';
        case '-': return '-';
        case '|': return '|';
        case 'r': // top-left corner
          if (isTop && isLeft) return 'r';
          if (isTop) return '-';
          if (isLeft) return '|';
          return 'r';
        case '7': // top-right corner
          if (isTop && isRight) return '7';
          if (isTop) return '-';
          if (isRight) return '|';
          return '7';
        case 'L': // bottom-left corner
          if (isBottom && isLeft) return 'L';
          if (isBottom) return '-';
          if (isLeft) return '|';
          return 'L';
        case 'J': // bottom-right corner
          if (isBottom && isRight) return 'J';
          if (isBottom) return '-';
          if (isRight) return '|';
          return 'J';
        case '>': // T-junction pointing right
          if (isTop && isLeft) return '>';
          if (isTop) return '-';
          if (isLeft) return '|';
          return '.';
        case '<': // T-junction pointing left
          if (isTop && isRight) return '<';
          if (isTop) return '-';
          if (isRight) return '|';
          return '.';
        default: return '.';
      }
    }

    // Scale a full pattern from base to target size
    function scalePattern(basePattern, scale) {
      if (scale === 1) return basePattern;

      const result = new Array(GRID_WIDTH * GRID_HEIGHT);

      for (let srcY = 0; srcY < BASE_HEIGHT; srcY++) {
        for (let srcX = 0; srcX < BASE_WIDTH; srcX++) {
          const symbol = basePattern[srcY * BASE_WIDTH + srcX];
          const block = expandSymbol(symbol, scale);

          // Place the expanded block
          for (let dy = 0; dy < scale; dy++) {
            for (let dx = 0; dx < scale; dx++) {
              const dstX = srcX * scale + dx;
              const dstY = srcY * scale + dy;
              result[dstY * GRID_WIDTH + dstX] = block[dy * scale + dx];
            }
          }
        }
      }

      return result;
    }

    // Generate scaled character map
    const CHAR_MAP = {};
    for (const [char, pattern] of Object.entries(CHAR_MAP_BASE)) {
      CHAR_MAP[char] = scalePattern(pattern, SCALE);
    }

    // --- SYSTEM LOGIC ---

    class KineticClock {
      constructor(parentElement) {
        this.container = document.createElement('div');
        this.container.className = 'clock';
        this.hourHand = document.createElement('div');
        this.hourHand.className = 'hand hour';
        this.minuteHand = document.createElement('div');
        this.minuteHand.className = 'hand minute';
        this.container.appendChild(this.hourHand);
        this.container.appendChild(this.minuteHand);
        parentElement.appendChild(this.container);
        this.setAngles(225, 225);
      }

      setAngles(h, m) {
        this.hourHand.style.transform = `rotate(${h}deg)`;
        this.minuteHand.style.transform = `rotate(${m}deg)`;
      }
    }

    class DigitGrid {
      constructor(parentElement) {
        this.grid = document.createElement('div');
        this.grid.className = 'digit-grid';
        this.grid.style.gridTemplateColumns = `repeat(${GRID_WIDTH}, var(--clock-size))`;
        this.grid.style.gridTemplateRows = `repeat(${GRID_HEIGHT}, var(--clock-size))`;
        parentElement.appendChild(this.grid);
        this.clocks = [];
        for (let i = 0; i < CLOCKS_PER_DIGIT; i++) {
          this.clocks.push(new KineticClock(this.grid));
        }
      }

      renderChar(char) {
        const pattern = CHAR_MAP[char] || CHAR_MAP[' '];
        pattern.forEach((symbol, index) => {
          const angles = ANGLES[symbol] || ANGLES['.'];
          this.clocks[index].setAngles(angles[0], angles[1]);
        });
      }
    }

    // --- INITIALIZATION ---

    const displayContainer = document.getElementById('display');
    const digits = [];
    const NUM_SLOTS = 8;

    for (let i = 0; i < NUM_SLOTS; i++) {
      digits.push(new DigitGrid(displayContainer));
    }

    function updateTime() {
      const now = new Date();
      let h = now.getHours();
      let m = now.getMinutes();
      let s = now.getSeconds();

      h = h % 12;
      h = h ? h : 12;

      const hStr = h.toString().padStart(2, '0');
      const mStr = m.toString().padStart(2, '0');
      const sStr = s.toString().padStart(2, '0');

      digits[0].renderChar(hStr[0]);
      digits[1].renderChar(hStr[1]);
      digits[2].renderChar(':');
      digits[3].renderChar(mStr[0]);
      digits[4].renderChar(mStr[1]);
      digits[5].renderChar(':');
      digits[6].renderChar(sStr[0]);
      digits[7].renderChar(sStr[1]);
    }

    // Log stats
    console.log(`Scale: ${SCALE}x`);
    console.log(`Grid: ${GRID_WIDTH}x${GRID_HEIGHT}`);
    console.log(`Clocks per digit: ${CLOCKS_PER_DIGIT}`);
    console.log(`Total clocks: ${CLOCKS_PER_DIGIT * 8}`);

    updateTime();
    setInterval(updateTime, 1000);
  </script>
</body>

</html>